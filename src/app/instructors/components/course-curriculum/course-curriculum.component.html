<div class="p-4">
  <!-- Title -->
  <h2>Curriculum</h2>

  <hr />
  <!-- Divider -->

  <div class="row">
    <!-- Add lecture Modal button -->
    <div class="d-sm-flex justify-content-sm-between align-items-center mb-3">
      <h3 class="mb-2 mb-sm-0">Add Chapter</h3>
      <a class="btn btn-primary-soft mb-0" (click)="addLecture()"
        ><i class="bi bi-plus-circle me-2"></i>Add Chapter</a
      >
    </div>
    <div *ngIf="isChapterInputShown">
      <input
        class="form-control mb-1"
        type="text"
        placeholder="Enter chapter name"
        [(ngModel)]="chapterName"
      />
      <div class="text-end">
        <button
          type="button"
          class="btn btn-primary-soft"
          (click)="saveChapter()"
        >
          Save
        </button>
      </div>
    </div>

    <!-- Edit lecture START -->
    <div *ngIf="curriculum">
      <div *ngFor="let chapter of curriculum; let i = index">
        <!-- Display chapters -->
        <div
          class="accordion accordion-icon accordion-bg-light"
          id="accordionExample2"
        >
          <!-- Item START -->
          <div class="accordion-item mb-3">
            <h6 class="accordion-header font-base" id="heading-{{ i }}">
              <button
                class="accordion-button fw-bold rounded d-inline-block collapsed d-block pe-5"
                type="button"
                data-bs-toggle="collapse"
                [attr.data-bs-target]="'#collapse-' + i"
                aria-expanded="false"
                [attr.aria-controls]="'collapse-' + i"
              >
                {{ chapter.chapterName }}
              </button>
            </h6>

            <div
              [id]="'collapse-' + i"
              class="accordion-collapse collapse show"
              [attr.aria-labelledby]="'heading-' + i"
              data-bs-parent="#accordionExample2"
            >
              <!-- Topic START -->
              <div class="accordion-body mt-2">
                <!-- Video item START -->
                <div *ngIf="chapter.topics">
                  <div
                    class="d-flex justify-content-between"
                    *ngFor="let topic of chapter.topics"
                  >
                    <div>
                      <span class="btn btn-danger-soft btn-round"
                        ><i class="fa-solid fa-play"></i
                      ></span>
                      <span class="ms-2 mb-0 h6 fw-light">
                        {{ topic.topicName }}
                      </span>
                    </div>

                    <div>
                      <a
                        class="btn btn-sm btn-success-soft btn-round me-1 mb-1 mb-md-0"
                        ><i class="far fa-fw fa-edit"></i
                      ></a>
                      <button class="btn btn-sm btn-danger-soft btn-round mb-0">
                        <i class="fas fa-fw fa-times"></i>
                      </button>
                    </div>
                  </div>

                  <!-- Edit and cancel button -->
                </div>

                <!-- Add topic -->
                <div class="text-end">
                  <button
                    class="btn btn-sm btn-dark my-3"
                    (click)="showTopicInput(i)"
                  >
                    Add topic
                  </button>
                </div>

                <div *ngIf="selectedChapterIndex == i && isTopicInputShown">
                  <input
                    class="form-control mb-1"
                    type="text"
                    placeholder="Enter topic name"
                    [(ngModel)]="topicName"
                  />
                  <div class="text-end">
                    <button
                      type="button"
                      class="btn btn-primary-soft"
                      (click)="saveTopic(i)"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
              <!-- Topic END -->
            </div>
          </div>
          <!-- Item END -->
        </div>
      </div>
    </div>

    <div class="text-end">
      <button matStepperPrevious class="btn btn-secondary me-2">Back</button>
      <button type="button" class="btn btn-secondary" (click)="saveCourse()">
        Save
      </button>
    </div>
    <!-- Edit lecture END -->
  </div>
</div>
